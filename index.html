<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="x5-fullscreen" content="true">
    <meta name="full-screen" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <title>摇一摇抽奖页</title>
    <script type="text/javascript" src="../../js1/plugins/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="../../js1/plugins/jweixin-1.2.0.js"></script>
    <script type="text/javascript" src="../../js1/plugins/md5.min.js"></script>
    <script type="text/javascript" src="../../js1/plugins/vue.min.js"></script>
    <script type="text/javascript" src="../../js1/plugins/hammer.min.js"></script>
    <script type="text/javascript" src="../../js1/plugins/vue-touch.min.js"></script>
    <script type="text/javascript" src="../../js1/plugins/jsencrypt.min.js"></script>
    <script type="text/javascript" src="../../js1/zexUtility.js"></script>
    <script type="text/javascript" src="../../js1/zexService.js"></script>
    <script type="text/javascript" src="../../js1/wxConfig.js"></script>
</head>
<style>
    .col_red{color: red;}
    .col_gray{color: gray;}
</style>
<body>

</body>
</html>
<script>
 

    if (window.DeviceMotionEvent){
		alert(window.DeviceMotionEvent)
        var speed = 10;
        var x = y = z = lastX = lastY = lastZ = 0;
        window.addEventListener('devicemotion',
                function () {
                    var acceleration = event.accelerationIncludingGravity;
                    x = acceleration.x;
                    y = acceleration.y;
                    
                    lastX = x;
                    lastY = y;
                },false);
		
			alert("摇一摇")
	} else {
			alert("您的手机不支持摇一摇功能")
     
    };
	
	
	function iosCheck() {
    return new Promise((resolve, reject) => {
        if (typeof( DeviceMotionEvent ) !== "undefined" && typeof( DeviceMotionEvent.requestPermission ) === "function") {
            getPermission().then(() => {
                resolve();
            }).catch((e) => {
                // 用户拒绝
                if (e.type === 1) {
                    // 用户上次状态为拒绝，提示弹窗
                } else if (e.type === 2) { // 用户首次进入，获取权限失败，需手动开启，弹窗引导
                    // bind event
                    $(modal).on('touchstart', () => {
                            getPermission().then(() => {
                                resolve();
                            }).catch(() => {
                                // 用户拒绝授权，提示
                            });
                    })
                }
            });
        } else {
            resolve();
        }
    })
}
function getPermission() {
    return new Promise((resolve, reject) => {
        DeviceMotionEvent.requestPermission()
            .then( response => {
                if ( response == "granted" ) {
                    resolve();
                } else {
                    reject({type: 1});
                }
            }).catch(() => {
                reject({type: 2});
            })
    })

}
iosCheck().then(() => {
    window.addEventListener('devicemotion', deviceMotionHandler, false);
})
	
	

	
</script>