<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="x5-fullscreen" content="true">
    <meta name="full-screen" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <title>摇一摇抽奖页</title>
    <link rel="stylesheet" href="yaoyiyao.css">
    <link rel="stylesheet" href="../css/plugins/loading.css">
    <script type="text/javascript" src="../js/plugins/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="../js/plugins/jweixin-1.2.0.js"></script>
    <script type="text/javascript" src="../js/plugins/md5.min.js"></script>
    <script type="text/javascript" src="../js/plugins/vue.min.js"></script>
    <script type="text/javascript" src="../js/plugins/hammer.min.js"></script>
    <script type="text/javascript" src="../js/plugins/vue-touch.min.js"></script>
    <script type="text/javascript" src="../js/plugins/jsencrypt.min.js"></script>
    <script type="text/javascript" src="../js/zexUtility.js"></script>
    <script type="text/javascript" src="../js/zexService.js"></script>
    <script type="text/javascript" src="../js/wxConfig.js"></script>
    <script type="text/javascript" src="../js/zexApis.js"></script>
</head>
<style>
    .col_red{color: red;}
    .col_gray{color: gray;}
</style>
<body>
<div id="shake_container" class="shake_page">
    <div id="page_loading" class="page-loading">
        <div class="page-loading-control">
            <div class="rect1"></div>
            <div class="rect2"></div>
            <div class="rect3"></div>
            <div class="rect4"></div>
            <div class="rect5"></div>
        </div>
    </div>
  </div>
</body>
</html>
<script>
    if(illegalRequest){
        //成公关闭loading页面
        setTimeout(function(){
            $('#page_loading').css('display','none');
        },500);
        $('#error_cuowu').css('display','-webkit-box');
    };
    function closewin(){
        wx.closeWindow();
    }

//    if (window.DeviceMotionEvent){
//        var speed = 10;
//        var x = y = z = lastX = lastY = lastZ = 0;
//        window.addEventListener('devicemotion',
//                function () {
//                    var acceleration = event.accelerationIncludingGravity;
//                    x = acceleration.x;
//                    y = acceleration.y;
//                    if(!shake_container.isyao){
//                        if (Math.abs(x - lastX) > speed || Math.abs(y - lastY) > speed) {
//                            $('#prize').addClass('prize_yd');
//                          alert("1111111")
//                        };
//                    };
//                    lastX = x;
//                    lastY = y;
//                },false);
//    } else {
//        $('#tishi_title').html('您的手机不支持摇一摇功能');
//        $('#error_cuowu').css('display','-webkit-box');
//    };
	
	

	
	
	let vm = new Vue({ 
    el:'#app', 
    data:{ 
      msg:'fff' ,
      last_update: 0,
      last_x: 0,
      last_y: 0,
      last_z: 0,
    },
    mounted() {
      this.init();
    },
    methods:{
      // 初始化摇一摇，添加摇动监听
    init() {
      this.last_update = new Date().getTime();
      if (window.DeviceMotionEvent) {
        window.addEventListener(
          "devicemotion",
          this.deviceMotionHandler,
          false
        );
      } else {
        alert("not support mobile event");
      }
    },
    // 摇一摇事件回调函数
    deviceMotionHandler(eventData) {
      var acceleration = eventData.accelerationIncludingGravity;
      var curTime = new Date().getTime();
      if (curTime - this.last_update > 100) {
        var diffTime = curTime - this.last_update;
        this.last_update = curTime;
        var x = 0,
          y = 0,
          z = 0;
        x = acceleration.x;
        y = acceleration.y;
        z = acceleration.z;
        var speed =
          (Math.abs(x + y + z - this.last_x - this.last_y - this.last_z) /
            diffTime) *
          10000;
        if (Number(speed) > Number(this.SHAKE_THRESHOLD)) {
          // 判断为摇一摇动作
          alert('摇动')
        }
        this.last_x = x;
        this.last_y = y;
        this.last_z = z;
      }
    }
    }
  });


	
	
</script>